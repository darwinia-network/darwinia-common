name: House keeping
on:
  pull_request:
    branches:
      - main
      - master

env:
  OS: ubuntu-latest
  RUST_TOOLCHAIN: nightly
  RUST_BACKTRACE: full
  RUSTC_WRAPPER: sccache
  SCCACHE_LINK: https://github.com/mozilla/sccache/releases/download
  SCCACHE_VERSION: v0.2.15
  SCCACHE_DIR: /home/runner/.cache/sccache
  NODE_VERSION: 10

jobs:
  clean-artifacts:
    name: Clean artifacts
    if: github.event_name == 'pull_request' && (github.event.action == 'closed' || github.event.pull_request.merged == true)
    steps:
      - uses: geekyeggo/delete-artifact@v1
        with:
          name: |
            subalfred
            node
    runs-on: ubuntu-latest
